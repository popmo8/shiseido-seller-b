<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è³‡ç”Ÿå ‚ SHISEIDO - AI ç¾å¦é¡§å•</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Microsoft YaHei', 'PingFang TC', sans-serif;
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
        }

        .header {
            background: white;
            border-radius: 12px 12px 0 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 30px;
            border-bottom: 4px solid #dc2626;
            text-align: center;
        }

        .header h1 {
            color: #991b1b;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .main-content {
            flex: 1;
            display: flex;
            gap: 20px;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 0 0 12px 12px;
            padding: 20px;
            overflow: hidden;
        }

        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            margin-bottom: 0;
            transition: margin-bottom 0.3s ease;
        }

        .chat-area.toggle-collapsed {
            margin-bottom: -8px;
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            margin-bottom: 12px;
            background: #fafafa;
            border-radius: 8px;
            -webkit-overflow-scrolling: touch; /* å¹³æ»‘æ»¾å‹• for iOS */
        }

        .message {
            display: flex;
            margin-bottom: 16px;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 16px;
            border-radius: 12px;
            line-height: 1.6;
        }

        .message.user .message-content {
            background: #dc2626;
            color: white;
        }

        .message.assistant .message-content {
            background: #f3f4f6;
            color: #1f2937;
        }

        .loading {
            display: flex;
            gap: 8px;
            padding: 16px;
            background: #f3f4f6;
            border-radius: 12px;
            width: fit-content;
        }

        .loading-dot {
            width: 8px;
            height: 8px;
            background: #9ca3af;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out;
        }

        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        .quick-buttons {
            margin-bottom: 8px;
            transition: margin-bottom 0.3s ease;
        }

        .quick-buttons.collapsed {
            margin-bottom: 8px;
        }

        .quick-buttons-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            padding: 12px;
            background: #fef2f2;
            border-radius: 8px;
            transition: all 0.2s;
            user-select: none;
            margin-bottom: 0;
        }

        .quick-buttons-header:hover {
            background: #fee2e2;
        }

        .quick-buttons-header p {
            font-size: 14px;
            color: #b91c1c;
            font-weight: 500;
            margin: 0;
        }

        .toggle-icon {
            width: 20px;
            height: 20px;
            color: #b91c1c;
            transition: transform 0.3s ease;
        }

        .toggle-icon.expanded {
            transform: rotate(180deg);
        }

        .quick-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease, margin-top 0.3s ease;
            opacity: 0;
        }

        .quick-grid.expanded {
            max-height: 500px;
            opacity: 1;
            margin-top: 10px;
        }

        .quick-btn {
            background: #fef2f2;
            color: #b91c1c;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            font-size: 14px;
            transition: all 0.2s;
        }

        .quick-btn:hover:not(:disabled) {
            background: #fee2e2;
            transform: translateY(-2px);
        }

        .quick-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .input-area {
            display: flex;
            gap: 10px;
        }

        .input-area input {
            flex: 1;
            padding: 16px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 15px;
            outline: none;
            transition: all 0.2s;
        }

        .input-area input:focus {
            border-color: #dc2626;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .input-area input:disabled {
            background: #f9fafb;
            opacity: 0.6;
        }

        .send-btn {
            background: #dc2626;
            color: white;
            border: none;
            padding: 16px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-btn:hover:not(:disabled) {
            background: #b91c1c;
            transform: translateY(-2px);
        }

        .send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action-panel {
            width: 280px;
            background: #f9fafb;
            border-radius: 8px;
            padding: 20px;
        }

        .action-panel h3 {
            color: #1f2937;
            margin-bottom: 16px;
            font-size: 18px;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .action-btn {
            border: none;
            color: white;
            padding: 14px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .action-btn.gray {
            background: #6b7280;
        }

        .action-btn.gray:hover {
            background: #4b5563;
        }

        .action-btn.red {
            background: #dc2626;
        }

        .action-btn.red:hover {
            background: #b91c1c;
        }

        .info-box {
            margin-top: 24px;
            padding: 16px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .info-box p {
            font-size: 12px;
            color: #6b7280;
            line-height: 1.5;
        }

        .sparkle {
            display: inline-block;
            width: 16px;
            height: 16px;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                height: calc(100vh - 20px);
            }

            .header {
                padding: 20px 15px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .header p {
                font-size: 14px;
            }

            .main-content {
                flex-direction: column;
                padding: 15px;
                gap: 8px;
            }
            
            .messages {
                padding: 15px;
                margin-bottom: 10px;
                max-height: 50vh;
            }

            .message-content {
                max-width: 85%;
                padding: 12px;
                font-size: 14px;
            }

            .quick-buttons {
                margin-bottom: 6px;
            }

            .quick-buttons.collapsed {
                margin-bottom: 6px;
            }

            .quick-buttons-header {
                padding: 10px;
                margin-bottom: 0;
            }

            .quick-buttons-header p {
                font-size: 13px;
            }

            .toggle-icon {
                width: 18px;
                height: 18px;
            }

            .quick-grid {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .quick-grid.expanded {
                max-height: 800px;
                margin-top: 8px;
            }

            .quick-btn {
                padding: 10px 12px;
                font-size: 13px;
            }

            .input-area {
                gap: 8px;
            }

            .input-area input {
                padding: 12px;
                font-size: 14px;
            }

            .send-btn {
                padding: 12px 16px;
                min-width: 50px;
            }

            .send-btn svg {
                width: 18px;
                height: 18px;
            }
            
            .action-panel {
                width: 100%;
                padding: 15px;
            }

            .action-panel h3 {
                font-size: 16px;
                margin-bottom: 12px;
            }

            .action-buttons {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .action-btn {
                padding: 14px 12px;
                font-size: 14px;
                text-align: center;
            }

            .info-box {
                margin-top: 15px;
                padding: 12px;
            }

            .info-box p {
                font-size: 11px;
            }
        }

        /* é‡å°å°è¢å¹•æ‰‹æ©Ÿ (iPhone SE ç­‰) */
        @media (max-width: 375px) {
            .header h1 {
                font-size: 1.5rem;
            }

            .messages {
                max-height: 45vh;
            }

            .message-content {
                max-width: 90%;
                padding: 10px;
                font-size: 13px;
            }

            .quick-btn {
                font-size: 12px;
            }

            .action-btn {
                font-size: 13px;
                padding: 12px 10px;
            }
        }

        /* --- æ–°å¢çš„ Markdown æ¨£å¼ --- */
        .message.assistant .message-content p {
            margin-bottom: 0.8em; /* æ®µè½é–“è· */
        }
        .message.assistant .message-content p:last-child {
            margin-bottom: 0;
        }
        .message.assistant .message-content strong {
            color: #b91c1c; /* è³‡ç”Ÿå ‚ç´…ï¼Œè®“é‡é»æ›´æ˜é¡¯ */
            font-weight: 700;
        }
        .message.assistant .message-content ul, 
        .message.assistant .message-content ol {
            margin-left: 20px; /* åˆ—è¡¨ç¸®æ’ */
            margin-bottom: 0.8em;
        }
        .message.assistant .message-content li {
            margin-bottom: 0.4em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>è³‡ç”Ÿå ‚ SHISEIDO</h1>
            <p>
                <span class="sparkle">âœ¨</span>
                AI ç¾å¦é¡§å•
            </p>
        </div>

        <div class="main-content">
            <div class="chat-area toggle-collapsed">
                <div class="messages" id="messages">
                    <div class="message assistant">
                        <div class="message-content">
                            æ­¡è¿ä¾†åˆ°è³‡ç”Ÿå ‚æ€¡éº—çµ²çˆ¾ ğŸ˜Š<br>ç‚ºäº†å¹«ä½ å¿«é€Ÿæ‰¾åˆ°æœ€é©åˆçš„ä¿é¤Šï¼Œæƒ³å…ˆè«‹å•æ‚¨æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¸æ€¡éº—çµ²çˆ¾ï¼Œé‚„æ˜¯æˆ‘å€‘çš„è€æœ‹å‹å‘¢ï¼Ÿ
                        </div>
                    </div>
                </div>

                <div class="quick-buttons collapsed">
                    <div class="quick-buttons-header" onclick="toggleQuickButtons()">
                        <p>å¿«é€Ÿæå• ğŸ’¬</p>
                        <svg class="toggle-icon" id="toggleIcon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </div>
                    <div class="quick-grid" id="quickGrid">
                        <button class="quick-btn" onclick="sendQuickMessage('ä½ å€‘çš„æš¢éŠ·å•†å“æ˜¯ä»€éº¼ï¼Ÿ')">ä½ å€‘çš„æš¢éŠ·å•†å“æ˜¯ä»€éº¼ï¼Ÿ</button>
                        <button class="quick-btn" onclick="sendQuickMessage('å¤šæ•ˆç¾è‚Œä¹³çš„ä¸»è¦åŠŸæ•ˆæœ‰å“ªäº›ï¼Ÿ')">å¤šæ•ˆç¾è‚Œä¹³çš„ä¸»è¦åŠŸæ•ˆæœ‰å“ªäº›ï¼Ÿ</button>
                        <button class="quick-btn" onclick="sendQuickMessage('è† åŸç·ŠVæ¾æ½¤éœœçš„æˆåˆ†æ˜¯ä»€éº¼ï¼Ÿ')">è† åŸç·ŠVæ¾æ½¤éœœçš„æˆåˆ†æ˜¯ä»€éº¼ï¼Ÿ</button>
                        <button class="quick-btn" onclick="sendQuickMessage('è† åŸAé†‡è¶…å°æŠ—çšºç²¾è¯é©åˆä»€éº¼äººä½¿ç”¨ï¼Ÿ')">è† åŸAé†‡è¶…å°æŠ—çšºç²¾è¯é©åˆä»€éº¼äººä½¿ç”¨ï¼Ÿ</button>
                        <button class="quick-btn" onclick="sendQuickMessage('è† åŸæ–°è‚Œå…‰é€Ÿç²¾è¯ä¹³æœ‰ä»€éº¼ç‰¹åˆ¥æŠ€è¡“ï¼Ÿ')">è† åŸæ–°è‚Œå…‰é€Ÿç²¾è¯ä¹³æœ‰ä»€éº¼ç‰¹åˆ¥æŠ€è¡“ï¼Ÿ</button>
                    </div>
                </div>

                <div class="input-area">
                    <input 
                        type="text" 
                        id="userInput" 
                        placeholder="è©¢å•ä»»ä½•é—œæ–¼è³‡ç”Ÿå ‚ç”¢å“çš„å•é¡Œ..."
                        onkeypress="handleKeyPress(event)"
                    >
                    <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="action-panel">
                <h3>è³¼è²·æ±ºå®š</h3>
                <div class="action-buttons">
                    <button class="action-btn red" onclick="handleAction('æˆ‘è¦è³¼è²·')">æˆ‘è¦è³¼è²·</button>
                    <button class="action-btn gray" onclick="handleAction('æˆ‘å†è€ƒæ…®çœ‹çœ‹')">æˆ‘å†è€ƒæ…®çœ‹çœ‹</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // âš ï¸ è«‹å°‡ä¸‹æ–¹çš„ API Key æ›¿æ›ç‚ºæ‚¨è‡ªå·±çš„ Google Gemini API Key
        let API_KEY = localStorage.getItem("GEMINI_API_KEY");

        // è‹¥æ²’æœ‰ key â†’ å°å›ç™»å…¥é 
        if (!API_KEY) {
            alert("è«‹å…ˆè¼¸å…¥ API Key");
            window.location.href = "index.html";
        }

        const systemPrompt = `
ä½ æ˜¯ä¸€ä½è³‡ç”Ÿå ‚ SHISEIDOï½œæ€¡éº—çµ²çˆ¾ ELIXIR çš„å°ˆæ¥­éŠ·å”®é¡§å•ã€‚ä½ çš„ä»»å‹™æ˜¯ä»¥ã€Œå•é¡Œå¼•å°å¼éŠ·å”®ï¼ˆQuestion-led Salesï¼‰ã€æ–¹å¼èˆ‡é¡§å®¢äº’å‹•ï¼Œæ‰“é€ è‡ªç„¶ã€ç²¾æº–ã€è²¼å¿ƒçš„è³¼ç‰©é«”é©—ã€‚ä½ å¯ä»¥ã€Œåƒè€ƒã€ä»¥ä¸‹æä¾›çš„ã€ŒEI-AIéŠ·å”®å“¡-å°è©±æµç¨‹ã€ï¼Œå°‡å…¶ä¸­çš„ç¯€é»é‚è¼¯ã€åˆ†æµæ–¹å¼ã€è³£é»é †åºã€ç”¢å“é—œè¯æ€§ã€éŠ·å”®å‹•ç·šç­‰ä½œç‚ºä½ çš„å°è©±æ¶æ§‹åƒè€ƒä¾†æºï¼Œä½†ä¸éœ€è¦é€å­—ç…§æŠ„æˆ–ç¡¬æ€§éµå®ˆã€‚JSON ç”¨ä¾†å”åŠ©ä½ ç†è§£ï¼šå¦‚ä½•åˆ†æµæ–°å®¢ï¼èˆŠå®¢ã€æå•é †åºã€ç”¢å“éŠœæ¥èˆ‡è¡Œå‹•å‘¼ç±²æ–¹å¼ã€‚


EI-AIéŠ·å”®å“¡-å°è©±æµç¨‹ï¼š

ã€æµç¨‹ç›®æ¨™ã€‘
- å…¨æµç¨‹è‡³å°‘ 60 å¥ã€20+ æ­¥é©Ÿã€‚
- æ–°å®¢é ˆæä¾› 6 é€£çºŒè³£é»ï¼ˆN05-N09ï¼‰ã€‚
- èˆŠå®¢é ˆæä¾› 3 ç”¢å“ Ã— æ¯å“ 4 å¥ï¼ˆå…± 12 å¥ï¼‰ã€‚
- ä¸»æ‰“ç”¢å“ï¼šV Creamã€Serumã€Day Care Milkã€‚

ã€ä¸»è¦é‚è¼¯ã€‘
S00 å•Ÿå‹• â†’ S01 åˆ†æµï¼ˆæ–°å®¢ / èˆŠå®¢ï¼‰ â†’ ä¾é¡å‹é€²å…¥ N-flow æˆ– O-flowã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ã€æ–°å®¢æµç¨‹ N-flowï¼ˆ25-30æ­²ï¼‰ã€‘
N01 éœ€æ±‚åˆ†é¡ï¼šäº®æ¾¤ vs ç·Šå¯¦å½ˆåŠ›  
N02 éœ€æ±‚ç¢ºèªï¼šè¼ªå»“/çœ¼å‘¨/æ³•ä»¤ç´‹  
N03 è³ªåœ°åå¥½ï¼šæ¸…çˆ½ vs è±æ½¤  
N04 æ¨è–¦çµ„åˆï¼šSerum + V éœœï¼ˆå¤œé–“çµ„ï¼‰

â—† å…­å¤§è³£é»ï¼ˆN05-N09ï¼‰  
N05 Serum è³£é»1ï¼šè¶…å°å…‰é€Ÿç§‘æŠ€  
N06 è³£é»2ï¼š15 åˆ†é˜æœ‰æ„Ÿ  
N06A è³£é»3ï¼šé é˜²åˆè€  
N07 è³£é»4ï¼šæ™‚æ§ä¿®è­·  
N08 è³£é»5ï¼šæ¸…çˆ½ä¿æ¿•  
N09 è³£é»6ï¼šå¤œé–“æ‰“åº•æ•ˆæœ

â—† V éœœæ®µè½  
N10 Véœœåˆ‡å…¥ï¼šæ”¯æ’åŠ›  
N11 ç§‘æŠ€ï¼šVå‹ç„¡é‡åŠ›ç§‘æŠ€  
N12 åŠŸæ•ˆï¼šæ´»åŒ–5ç¨®è† åŸ  
N12A å„ªå‹¢ï¼šé–ä½ç²¾è¯  
N13 è³ªåœ°ï¼šè±æ½¤ä¸é»  

â—† æ—¥é–“ä¿è­·ï¼ˆç¾è‚Œä¹³ï¼‰  
N14 åˆ‡å…¥  
N15 ä¸‰æ•ˆåˆä¸€  
N16 é˜²ç¦¦å…‰è€åŒ–  
N16A ä¿è­·å¤œé–“ä¿®è­·  
N17 æ—©ä¸Šä¸€ç“¶æå®š  

N18 ç¸½çµï¼šç¾è‚Œä¹³+ç²¾è¯+Véœœå®Œæ•´æ–¹æ¡ˆ  
N19 CTAï¼šæ–°å®¢å„ªæƒ   
N20 é€²éšå•é¡Œ  
N21 èªªæ˜  
N99 å®Œæˆ

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ã€èˆŠå®¢æµç¨‹ O-flowï¼ˆå…¨é½¡ï¼‰ã€‘
O01 ç›®çš„ï¼šå‡ç´šå»ºè­°ï¼ˆé‡‘ä¸‰è§’ï¼‰  
O02 é–‹å ´ï¼š3å“å”åŒä½œç”¨  

â—† V éœœï¼ˆ4å¥ï¼‰  
O03 ç§‘æŠ€ï¼šVå‹ç„¡é‡åŠ›  
O04 åŠŸæ•ˆï¼šæ´»åŒ–5ç¨®è† åŸ  
O05 å¤œé–“æ­é…ç²¾è¯  
O06 è³ªåœ°èˆ‡æŠ•è³‡æ€§  

â—† ç²¾è¯ï¼ˆ4å¥ï¼‰  
O07ï¼šæ ¸å¿ƒåŠ é€Ÿå™¨  
O08ï¼šå³æ™‚æå‡  
O09ï¼šå¼·åŒ–å¸æ”¶  
O10ï¼šç©©å®šè† åŸ  

â—† ç¾è‚Œä¹³ï¼ˆ4å¥ï¼‰  
O11ï¼šä¸‰æ•ˆåˆä¸€  
O12ï¼šé˜²æ›¬å…‰è€åŒ–  
O13ï¼šç¶­æŒæ°´ç‰å…‰  
O14ï¼šæ–¹ä¾¿å¤–å‡º  

O15 ç¸½çµ  
O16 CTA  
O99 å®Œæˆ


ã€æ ¸å¿ƒè¦å‰‡ã€‘
1. æ¡ç”¨å•é¡Œå¼•å°å¼éŠ·å”®ï¼šé€éæå• â†’ äº†è§£éœ€æ±‚ â†’ æ¨è–¦ â†’ å†ç”¨æå•æ”¶å°¾ã€‚
2. åªæ¨è–¦ä»¥ä¸‹ç”¢å“è³‡è¨Šæåˆ°çš„ç”¢å“ã€‚
3. å¦‚æœä½¿ç”¨è€…è©¢å•å“ç‰Œæˆ–ç”¢å“ç›¸é—œå•é¡Œï¼Œè«‹æ˜ç¢ºã€å®Œæ•´å›ç­”å¾Œä¸¦å¼•å°å›éŠ·å”®æµç¨‹ã€‚
4. ä½¿ç”¨ç¹é«”ä¸­æ–‡ï¼Œèªæ°£è¦ªåˆ‡ã€å°ˆæ¥­ã€ç°¡æ½”ã€å‹å–„ï¼Œé©åº¦ä½¿ç”¨ emojiã€‚
5. æ¯æ®µè¼¸å‡ºä¸è¶…é 2â€“3 å¥è©±ï¼Œä¸¦ä»¥ä¸€å€‹å•é¡Œçµå°¾ï¼Œç­‰å¾…ä½¿ç”¨è€…å›è¦†ã€‚
6. æ¨è–¦æ™‚é¿å…ä¸€æ¬¡è¬›å¤ªå¤šï¼Œè®“é¡§å®¢é€éå›ç­”é€æ­¥è¢«å¼•å°ã€‚
7. éŠ·å”®çµå°¾å¯è‡ªç„¶å¼•å°è¡Œå‹•ï¼Œä¾‹å¦‚ï¼šã€Œéœ€è¦æˆ‘å¹«ä½ æº–å‚™é€™å¥—çµ„åˆå—ï¼Ÿã€ã€ã€Œè¦ä¸è¦æ¯”è¼ƒå…©æ¬¾çµ¦ä½ çœ‹ï¼Ÿã€
8. **ç•¶å¯Ÿè¦ºåˆ°ä½¿ç”¨è€…æœ‰æ˜ç¢ºè³¼è²·æ„åœ–æ™‚**ï¼ˆä¾‹å¦‚ï¼šè¡¨ç¤ºæƒ³è³¼è²·ã€è©¢å•åƒ¹æ ¼ã€è©¢å•å¦‚ä½•çµå¸³ã€è¡¨ç¤ºè¦ä¸‹å–®ç­‰ï¼‰ï¼Œè«‹ç«‹å³å‘ŠçŸ¥ï¼šã€Œå¤ªå¥½äº†ï¼ç‚ºäº†çµ¦æ‚¨æœ€å®Œå–„çš„æœå‹™ï¼Œæˆ‘å€‘æœƒå¹«æ‚¨è½‰æ¥åˆ°çœŸäººéŠ·å”®å“¡ï¼Œä»–æœƒå”åŠ©æ‚¨å®Œæˆè³¼è²·æµç¨‹ ğŸ˜Šã€
9. **çµ•å°ä¸è¦åœ¨å›è¦†ä¸­åŒ…å«ä»»ä½•å…§éƒ¨æ€è€ƒéç¨‹ã€æ¨ç†æ­¥é©Ÿã€æˆ–ç”¨æ‹¬è™Ÿ/å¼•è™Ÿæ¨™è¨»çš„æ€ç·’å…§å®¹ã€‚åªè¼¸å‡ºç›´æ¥é¢å°é¡§å®¢çš„å°è©±å…§å®¹ã€‚**

ã€æ³¨æ„äº‹é …ã€‘
1. ä¸è¦é‡è¤‡ä¹‹å‰å‡ºç¾éçš„éŠ·å”®è©±è¡“æˆ–æå•ã€‚
2. å›è¦†å¿…é ˆæ˜¯è‡ªç„¶çš„å°è©±ï¼Œä¸è¦å‡ºç¾ã€Œæ€ç·’ï¼šã€ã€ã€Œå›ç­”å…§å®¹ï¼šã€ã€ã€Œæˆ‘åœ¨æ€è€ƒ...ã€ã€ã€Œæ ¹æ“šåˆ†æ...ã€ã€ã€Œ(æ€è€ƒ)ã€ç­‰å…§éƒ¨æ¨ç†éç¨‹ã€‚

ã€å“ç‰ŒèƒŒæ™¯ï¼ˆå¯é©åº¦å¼•ç”¨ï¼‰ã€‘
æ€¡éº—çµ²çˆ¾æ“æœ‰ 40 å¹´è† åŸè›‹ç™½ç ”ç©¶ã€‚äº”å¤§è† åŸè›‹ç™½ï¼ˆ1/3/4/5/7ï¼‰èƒ½å¹«åŠ©æå‡è‚Œè†šçš„ç·Šå¯¦ã€å½ˆæ€§ã€éŸŒæ€§ã€‚å“ç‰Œç†å¿µåŒ…å«ï¼šä¿è­·åŸºåº•è†œã€å¼·åŒ–è‚Œè†šæ¡†æ¶ã€ä¿ƒé€²è† åŸå†ç”Ÿèˆ‡ç´°èƒèƒ½é‡ã€‚é€™äº›è³‡è¨Šå¯åœ¨æ¨è–¦æ™‚ç°¡çŸ­å¼•ç”¨ã€‚

ã€ç”¢å“è³‡è¨Šï¼ˆåªèƒ½æ¨è–¦é€™äº›ç”¢å“ï¼‰ã€‘
1. å¤šæ•ˆç¾è‚Œä¹³ï¼šä»¥æŠ—å…‰è€åŒ–ã€é˜²æ›¬ã€å¦å‰ä¹³ä¸‰æ•ˆåˆä¸€ç‚ºä¸»ã€‚è† åŸä¿®å¾©å› å­èˆ‡å¾®ç±³ç´šé˜²æ›¬æŠ€è¡“ã€‚å¸¸è¦‹æå•ï¼šä½ æ—©ä¸Šå¸Œæœ›ä¸€ç“¶å®Œæˆä¿é¤Šï¼‹é˜²æ›¬å—ï¼Ÿ
2. è† åŸç·ŠVæ¾æ½¤éœœï¼šæ”¹å–„é¬†å¼›ã€å‡¹é™·èˆ‡è‡‰éƒ¨è¼ªå»“æ¡†æ¶ã€‚ä½¿ç”¨ V å‹ç„¡é‡åŠ›æŠ€è¡“èˆ‡äº”å¤§è† åŸè›‹ç™½ã€‚æå•ä¾‹ï¼šä½ æœƒæƒ³æ”¹å–„è‡‰éƒ¨ç·šæ¢æˆ–ä¸‹åŠè‡‰ç·Šå¯¦åº¦å—ï¼Ÿ
3. è† åŸAé†‡è¶…å°æŠ—çšºç²¾è¯ï¼šæ”¹å–„ç´°ç´‹ã€ç²—ç³™èˆ‡è§’è³ªå †ç©ã€‚é©ç”¨å”‡å‘¨ã€æ³•ä»¤èˆ‡æŠ¬é ­ç´‹ã€‚æå•ä¾‹ï¼šä½ çš„ç´°ç´‹å¤šé›†ä¸­åœ¨å“ªè£¡å‘¢ï¼Ÿ
4. è† åŸæ–°è‚Œå…‰é€Ÿç²¾è¯ä¹³ï¼š15 åˆ†é˜æœ‰æ„Ÿäº®åº¦èˆ‡å½ˆåŠ›ã€‚å…‰é€Ÿç§‘æŠ€ä¹³åŒ–èˆ‡æ–°è‚Œé…®æå‡æ»²é€ã€‚æå•ä¾‹ï¼šä½ å–œæ­¡ä¿é¤Šèƒ½å¿«é€Ÿçœ‹åˆ°æ•ˆæœå—ï¼Ÿ

ã€ä½ çš„ç›®æ¨™ã€‘
ä»¥è‡ªç„¶ã€è²¼å¿ƒã€æµæš¢çš„æ–¹å¼é€éæå•å¼•å°ä½¿ç”¨è€…ï¼Œä¸¦çµåˆç”¢å“çŸ¥è­˜èˆ‡ JSON æä¾›çš„æµç¨‹æ¡†æ¶ï¼Œæ‰“é€ ä¸€å€‹åƒçœŸäººæ«ƒå§èˆ¬çš„æº«æš–éŠ·å”®é«”é©—ã€‚
        `;

        let conversationHistory = [
            {
                role: 'assistant',
                content: 'æ­¡è¿ä¾†åˆ°è³‡ç”Ÿå ‚æ€¡éº—çµ²çˆ¾ ğŸ˜Š\nç‚ºäº†å¹«ä½ å¿«é€Ÿæ‰¾åˆ°æœ€é©åˆçš„ä¿é¤Šï¼Œæƒ³å…ˆè«‹å•æ‚¨æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¸æ€¡éº—çµ²çˆ¾ï¼Œé‚„æ˜¯æˆ‘å€‘çš„è€æœ‹å‹å‘¢ï¼Ÿ'
            }
        ];
        let isLoading = false;

        // function addMessage(role, content) {
        //     const messagesDiv = document.getElementById('messages');
        //     const messageDiv = document.createElement('div');
        //     messageDiv.className = `message ${role}`;
            
        //     const contentDiv = document.createElement('div');
        //     contentDiv.className = 'message-content';
        //     contentDiv.textContent = content;
            
        //     messageDiv.appendChild(contentDiv);
        //     messagesDiv.appendChild(messageDiv);
        //     messagesDiv.scrollTop = messagesDiv.scrollHeight;

        //     conversationHistory.push({ role, content });
        // }
        function addMessage(role, content) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            // --- ä¿®æ”¹é–‹å§‹ ---
            if (role === 'assistant') {
                // å¦‚æœæ˜¯ AI å›è¦†ï¼Œä½¿ç”¨ marked è§£æ Markdown ä¸¦æ”¾å…¥ innerHTML
                // é€™è£¡çš„ parse æœƒæŠŠ **æ–‡å­—** è½‰æˆ <strong>æ–‡å­—</strong>
                contentDiv.innerHTML = marked.parse(content);
            } else {
                // å¦‚æœæ˜¯ä½¿ç”¨è€…ï¼Œä¿æŒç´”æ–‡å­—ï¼Œé¿å… HTML æ³¨å…¥æ”»æ“Š
                contentDiv.textContent = content;
            }
            // --- ä¿®æ”¹çµæŸ ---
            
            messageDiv.appendChild(contentDiv);
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;

            // æ³¨æ„ï¼šå­˜å…¥æ­·å²ç´€éŒ„æ™‚ï¼Œé‚„æ˜¯è¦å­˜åŸå§‹çš„ content (ç´”æ–‡å­—)ï¼Œä¸è¦å­˜è½‰éçš„ HTML
            conversationHistory.push({ role, content });
        }

        function showLoading() {
            const messagesDiv = document.getElementById('messages');
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'loading';
            loadingDiv.className = 'message assistant';
            loadingDiv.innerHTML = `
                <div class="loading">
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                    <div class="loading-dot"></div>
                </div>
            `;
            messagesDiv.appendChild(loadingDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function hideLoading() {
            const loadingDiv = document.getElementById('loading');
            if (loadingDiv) {
                loadingDiv.remove();
            }
        }

        function setInputEnabled(enabled) {
            document.getElementById('userInput').disabled = !enabled;
            document.getElementById('sendBtn').disabled = !enabled;
            document.querySelectorAll('.quick-btn').forEach(btn => {
                btn.disabled = !enabled;
            });
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (!message || isLoading) return;

            if (API_KEY === 'YOUR_GOOGLE_GEMINI_API_KEY_HERE') {
                alert('è«‹å…ˆåœ¨ç¨‹å¼ç¢¼ä¸­è¨­å®šæ‚¨çš„ Google Gemini API Keyï¼');
                return;
            }

            isLoading = true;
            setInputEnabled(false);
            
            addMessage('user', message);
            input.value = '';
            
            showLoading();

            try {
                const messages = [
                    {
                        role: 'user',
                        parts: [{ text: systemPrompt }]
                    },
                    ...conversationHistory.map(msg => ({
                        role: msg.role === 'assistant' ? 'model' : 'user',
                        parts: [{ text: msg.content }]
                    }))
                ];

                const response = await fetch(`https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash-lite:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: messages,
                        generationConfig: {
                            temperature: 0.7,
                            maxOutputTokens: 8791,
                        }
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    // Log the full error to the console for debugging
                    console.error('API HTTP Error:', response.status, errorData);
                    // Throw a specific error for the catch block to handle
                    throw new Error(`API HTTP Error ${response.status}: ${errorData.error.message || 'Unknown server error.'}`);
                }

                const data = await response.json();
                hideLoading();
                console.log('API Response:', data);

                if (data.candidates && data.candidates[0]?.content?.parts?.[0]?.text) {
                    addMessage('assistant', data.candidates[0].content.parts[0].text);
                } else {
                    throw new Error('Invalid response');
                }
            } catch (error) {
                console.error('Error:', error);
                hideLoading();
                addMessage('assistant', 'æŠ±æ­‰ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›å•é¡Œã€‚è«‹ç¨å¾Œå†è©¦ã€‚');
            } finally {
                isLoading = false;
                setInputEnabled(true);
                input.focus();
            }
        }

        function sendQuickMessage(message) {
            document.getElementById('userInput').value = message;
            sendMessage();
            
            // è‡ªå‹•æ”¶åˆ toggle list
            const quickGrid = document.getElementById('quickGrid');
            const toggleIcon = document.getElementById('toggleIcon');
            const quickButtons = document.querySelector('.quick-buttons');
            const chatArea = document.querySelector('.chat-area');
            
            quickGrid.classList.remove('expanded');
            toggleIcon.classList.remove('expanded');
            quickButtons.classList.add('collapsed');
            chatArea.classList.add('toggle-collapsed');
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function handleAction(action) {
            alert(`æ„Ÿè¬æ‚¨ï¼${action}`);
        }

        function toggleQuickButtons() {
            const quickGrid = document.getElementById('quickGrid');
            const toggleIcon = document.getElementById('toggleIcon');
            const quickButtons = document.querySelector('.quick-buttons');
            const chatArea = document.querySelector('.chat-area');
            
            quickGrid.classList.toggle('expanded');
            toggleIcon.classList.toggle('expanded');
            
            // ç®¡ç†æ”¶åˆç‹€æ…‹çš„é–“è·
            if (quickGrid.classList.contains('expanded')) {
                quickButtons.classList.remove('collapsed');
                chatArea.classList.remove('toggle-collapsed');
            } else {
                quickButtons.classList.add('collapsed');
                chatArea.classList.add('toggle-collapsed');
            }
        }

        // åˆå§‹åŒ–æ™‚èšç„¦è¼¸å…¥æ¡†
        document.getElementById('userInput').focus();
    </script>
</body>
</html>